/*! 2017-09-07 16:31:35 */
!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=20)}([function(e,t,n){e.exports=n(1)(0)},function(e,t){e.exports=vendor},function(e,t,n){e.exports=n(1)(690)},function(e,t,n){e.exports=n(1)(1543)},function(e,t,n){e.exports=n(1)(1569)},function(e,t,n){e.exports=n(1)(1524)},function(e,t,n){"use strict";var o=n(29),r=n.n(o);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=Object.assign({credentials:"same-origin"},t),/post/i.test(t.method)){var n={"csrf-token":window.pageConfig&&window.pageConfig.csrf};"string"==typeof t.body&&(n["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8"),t.headers=Object.assign({},n,t.headers||{})}return r()(e,t).then(function(e){return e.json()}).then(function(e){if(200===e.code)return e.data;throw new Error(e.msg||"request error")})}},function(e,t,n){e.exports=n(1)(659)},function(e,t,n){e.exports=n(1)(1452)},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"e",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"f",function(){return c}),n.d(t,"d",function(){return u});var o="/admin/api/add",r="/admin/api/get",i="/admin/api/edit",a="/admin/api/delete",c="/admin/api/list",u="/admin/api/config"},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var o=Object.prototype.toString,r=function(e){return function(t){return o.call(t)=="[object "+e+"]"}},i=Array.isArray||r("Array"),a=r("Object")},function(e,t,n){e.exports=n(1)(97)},function(e,t,n){"use strict";var o=n(4),r=n(35),i=(n.n(r),n(6),{});i.home={def:function(e){return e}},t.a=Object(o.createActions)(i).home},function(e,t,n){e.exports=n(1)(8)},function(e,t,n){"use strict";var o=n(4),r=n(9),i=n(6),a=n(15),c={};c.list={getList:function(e){return Object(i.a)(r.f+"?"+Object(a.a)(e))},deleteItem:function(e){return Object(i.a)(r.b,{method:"POST",body:Object(a.a)(e)})}},t.a=Object(o.createActions)(c).list},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.prototype.toString,i=Array.isArray||function(e){return"[object Array]"===r.call(e)},a=function(e){var t=void 0===e?"undefined":o(e);return null===e||"object"!==t&&"function"!==t},c=encodeURIComponent,u=function(e,t,n,o){t=t||"&",n=n||"=",void 0===o&&(o=!0);var r=[];for(var u in e){var s=e[u];if(u=c(u),a(s))r.push(u),void 0!==s&&r.push(n,c(s+"")),r.push(t);else if(i(s)&&s.length)for(var l=0;l<s.length;++l){var f=s[l];a(f)&&(r.push(u,o?c("[]"):""),void 0!==f&&r.push(n,c(f+"")),r.push(t))}else i(s)&&!s.length&&o&&(r.push(u,"[]"),r.push(t))}return r.pop(),r.join("")}},function(e,t,n){"use strict";function o(e){return a.test(e)}function r(e,t){return(e||"").replace(/\\?\{\{\s*([^{}\s]+)\s*\}\}/g,function(e,n){return"\\"===e.charAt(0)?e.slice(1):null==t[n]?"":t[n]})}n.d(t,"b",function(){return i}),t.a=o,t.c=r;var i=function(e){return"string"==typeof e&&(e={type:e}),e||{}},a=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")},function(e,t,n){"use strict";var o=n(4),r=n(9),i=n(6),a=n(15),c={};c.edit={getConfig:function(e){return Object(i.a)(r.d+"/"+e)},addItem:function(e){return Object(i.a)(r.a,{method:"POST",body:Object(a.a)(e)})},editItem:function(e){return Object(i.a)(r.c,{method:"POST",body:Object(a.a)(e)})},getItem:function(e){return Object(i.a)(r.e+"?"+Object(a.a)(e))},deleteItem:function(e){return Object(i.a)(r.b,{method:"POST",body:Object(a.a)(e)})}},t.a=Object(o.createActions)(c).edit},function(e,t,n){"use strict";(function(e){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n(0),u=(n.n(c),n(2)),s=n(40),l=n(46),f=n(47),p=n(16),d=n(10),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),y=u.Form.Item,b={labelCol:{xs:{span:6}},wrapperCol:{xs:{span:14}}},g=function(t){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),m(n,[{key:"getConfig",value:function(){var e=this,t=this.props,n=t.actions,o=t.params;n.getConfig(o.model).then(function(t){t.error?u.message.error(t.payload+""):e.setState(t.payload)})}},{key:"filterAttributes",value:function(e){return function(t){return(t!==e.primaryKey.field||!e.primaryKey.autoIncrement)&&!1!==(e.attributes[t]||{}).editable}}},{key:"getAssociationActions",value:function(t){var n=t.model,o=t.displayName,r=t.key,i=t.component;return e.createElement("div",{styleName:"association-box"},e.createElement(u.Icon,{onClick:this.onAssociationAdd.bind(this,n),type:"plus",title:"添加"}),"transfer"===i.type?null:e.createElement(u.Icon,{onClick:this.onAssociationEdit.bind(this,n,r,o),type:"edit",title:"编辑"}))}},{key:"onAssociationEdit",value:function(e,t,n){var o=this.props.form,r=o.getFieldValue,i=r(t);if(void 0===i)return void u.message.info("请选择"+n);this.win&&!this.win.closed&&this.win.close(),this.win=window.open(location.pathname+"?popup=1#/model/"+e+"/edit/"+i,"adminEditWin","height=500,width=800,resizable=yes,scrollbars=yes")}},{key:"onAssociationAdd",value:function(e){this.win&&!this.win.closed&&this.win.close(),this.win=window.open(location.pathname+"?popup=1#/model/"+e+"/add","adminAddWin","height=500,width=800,resizable=yes,scrollbars=yes")}},{key:"onSuccess",value:function(e){var t=window.pageConfig.isPopup,n=this.props.params;t?window.opener.postMessage({from:"admin",msg:"success",type:e},this.getOrigin(window.opener.location)):this.props.history["delete"===e?"replace":"push"]("/model/"+n.model)}},{key:"getOrigin",value:function(e){return e.protocol+"//"+e.host}},{key:"listenMessage",value:function(){window.addEventListener("message",this.handleMessage,!1)}},{key:"unlistenMessage",value:function(){window.removeEventListener("message",this.handleMessage,!1)}},{key:"handleMessage",value:function(e){var t=e.data;"admin"===t.from&&"success"===t.msg&&(this.getConfig(),this.win.close())}},{key:"getValuePropName",value:function(e){return{transfer:"targetKeys",switch:"checked"}[e]||"value"}},{key:"formatValues",value:function(e){for(var t in e){var n=e[t];Object(d.b)(n)&&n._isAMomentObject&&(e[t]=n.format())}}},{key:"getRows",value:function(){var t=this,n=this.state.adminConfig,o=this.props,r=o.form,i=(o.params,r.getFieldDecorator);return Object.keys(n.attributes).filter(this.filterAttributes(n)).map(function(o){var r=n.attributes[o]||{},a=r.component=Object(p.b)(r.component||"input"),c=t.getInitialValue(o,r)||r.defaultValue;return e.createElement(y,h({key:o},b,{label:r.displayName,extra:r.helpMsg,hasFeedback:"input"===a.type}),i(o,{initialValue:c,valuePropName:t.getValuePropName(a.type),rules:[{required:void 0===r.required||r.required,message:"请输入"+r.displayName}]})(t.getComponent(a,{},{key:o,initialValue:c})),r.model?t.getAssociationActions({model:r.model,displayName:r.displayName,component:a,key:o}):null)})}},{key:"getComponent",value:function(t,n,r){var i=r.key,a=r.initialValue,c=t.type,p=this.props.form.setFieldsValue;return"input"===c?e.createElement(u.Input,n):"select"===c?e.createElement(u.Select,n,t.options.map(function(t){return e.createElement(u.Select.Option,{value:t.value+"",key:t.key},t.key)})):"textarea"===c?e.createElement(f.a,h({},n,{onChange:function(e){p(o({},i,e.target.value))},style:{minHeight:200}})):"editor"===c?e.createElement(s.a,{content:a,onChange:function(e){p(o({},i,e))}}):"transfer"===c?e.createElement(l.a,{titles:["来源","已选"],rowKey:function(e){return e.key},dataSource:t.options.map(function(e){return{key:e.value+"",title:e.key}}),render:function(e){return e.title}}):"datetime"===c?e.createElement(u.DatePicker,h({showTime:!0,format:"YYYY-MM-DD HH:mm:ss"},n)):void 0}},{key:"getBreadcrumb",value:function(){var t=this.state,n=t.adminConfig,o=(t.name,this.props.params);return e.createElement(u.Breadcrumb,{separator:">",style:{marginBottom:20}},e.createElement(u.Breadcrumb.Item,{href:"#/model/"+o.model},n.displayName+"列表"),e.createElement(u.Breadcrumb.Item,null,n.displayName+(o.pk?"编辑":"新增")))}}]),n}(c.Component);t.a=g}).call(t,n(0))},function(e,t){e.exports={"association-box":"_2OD9nWVTCCguwGodjqT-ui"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n(21),o=(n.n(t),n(22)),r=n.n(o),i=n(5),a=n(23),c=(n.n(a),n(28)),u=n(52),s=function(t){r.a.render(e.createElement(a.AppContainer,null,e.createElement(i.Provider,{store:u.a},e.createElement(t,null))),document.getElementById("app"))};s(c.a)}.call(t,n(0))},function(e,t,n){e.exports=n(1)(1250)},function(e,t,n){e.exports=n(1)(12)},function(e,t,n){e.exports=n(24)},function(e,t,n){"use strict";e.exports=n(25)},function(e,t,n){"use strict";e.exports.AppContainer=n(26)},function(e,t,n){"use strict";e.exports=n(27)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(0),u=c.Component,s=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){return this.props.component?c.createElement(this.props.component,this.props.props):c.Children.only(this.props.children)}}]),t}(u);e.exports=s},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=(n.n(a),n(5),n(3)),u=n(2),s=n(6),l=n(9),f=n(30),p=n(32),d=n(34),h=n(36),m=n(38),y=n(50),b=(n.n(y),n(51)),g=(n.n(b),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),v=function(t){function n(e,t){o(this,n);var i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return i.state={config:[]},i}return i(n,t),g(n,[{key:"componentDidMount",value:function(){var e=this;Object(s.a)(l.d).then(function(t){e.setState({config:t})}).catch(function(e){u.message.error(e+"")})}},{key:"render",value:function(){var t=window.pageConfig.isPopup;return e.createElement(c.HashRouter,null,e.createElement("div",{className:"app-root "+(t?"popup":"")},t?null:e.createElement("div",{className:"app-header"},e.createElement(f.a,null)),t?null:e.createElement("div",{className:"app-menu"},e.createElement(p.a,{config:this.state.config})),e.createElement("div",{className:"app-content"},e.createElement(c.Switch,null,e.createElement(c.Route,{exact:!0,path:"/",component:d.a}),e.createElement(c.Route,{exact:!0,path:"/model/:model",component:h.a}),e.createElement(c.Route,{exact:!0,path:"/model/:model/edit/:pk",component:m.a}),e.createElement(c.Route,{exact:!0,path:"/model/:model/add",component:m.a})))))}}]),n}(a.Component);t.a=v}).call(t,n(0))},function(e,t,n){e.exports=n(1)(1619)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=n.n(a),u=n(8),s=n.n(u),l=n(3),f=n(31),p=n.n(f),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),d(t,[{key:"render",value:function(){var e=void 0;try{e=window.pageConfig&&window.pageConfig.user&&JSON.parse(window.pageConfig.user)}catch(e){}return c.a.createElement("div",{styleName:"header"},c.a.createElement(l.Link,{to:"/",styleName:"logo"},"sequelize admin"),c.a.createElement("div",{styleName:"menu"},e&&e.email))}}]),t}(a.Component);t.a=s()(h,p.a)},function(e,t){e.exports={header:"_2y_ZVuLnvyrVVAduHVO6n9",logo:"_24CYOdF23C0MwEuhg73x8W",menu:"_1Eq2y6c5hfsETv7Qpoj_qw"}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=n.n(a),u=n(33),s=n.n(u),l=n(2),f=(n(3),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),p=l.Menu.Item,d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),f(t,[{key:"handleClick",value:function(e){var t=this.context.router,n=t.route.location.pathname,o=e.item.props.pathname;n!==o&&t.history.push(o)}},{key:"render",value:function(){var e=this.context.router,t=e.route.location.pathname;return c.a.createElement("div",null,c.a.createElement(l.Menu,{mode:"inline",theme:"dark",defaultSelectedKeys:[t.split("/").pop()],onClick:this.handleClick.bind(this)},this.props.config.map(function(e){return c.a.createElement(p,{key:e.name,pathname:"/model/"+e.name},e.adminConfig.displayName+"管理")})))}}]),t}(a.Component);d.contextTypes={router:s.a.object},t.a=d},function(e,t,n){e.exports=n(1)(1)},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=(n.n(a),n(3)),u=n(5),s=n(7),l=n(12),f=(n(2),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),p=function(t){function n(){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),f(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",null)}}]),n}(a.Component),d=function(e){return e.home.toJS()},h=function(e){return{actions:Object(s.bindActionCreators)(l.a,e)}};t.a=Object(c.withRouter)(Object(u.connect)(d,h)(p))}).call(t,n(0))},function(e,t){},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=(n.n(a),n(3)),u=n(5),s=n(7),l=n(13),f=n.n(l),p=n(2),d=n(14),h=n(16),m=n(10),y=n(37),b=n.n(y),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=p.Modal.confirm,O=function(t){function n(e,t){o(this,n);var i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return i.state=i.getDefState(e),i}return i(n,t),g(n,[{key:"getDefState",value:function(e){return{p:1,n:20,total:0,list:[],options:null,adminConfig:null,model:e.match.params.model}}},{key:"componentDidMount",value:function(){this.getList()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.match,o=e.match;n.url!==o.url&&this.setState(this.getDefState(e),function(){t.getList()})}},{key:"getList",value:function(){var e=this;this.props.actions.getList({model:this.state.model,p:this.state.p,n:this.state.n}).then(function(t){t.error?p.message.error(t.payload+""):e.setState(t.payload)})}},{key:"onEdit",value:function(e){this.props.history.push("/model/"+this.state.model+"/edit/"+e)}},{key:"onAdd",value:function(){this.props.history.push("/model/"+this.state.model+"/add")}},{key:"onDelete",value:function(e){var t=this,n=this.props.actions;v({title:"确定要删除记录吗",content:"",onOk:function(){n.deleteItem({model:t.state.model,pk:e}).then(function(e){e.error?p.message.error(e.payload+""):(p.message.success("删除成功"),t.getList())})}})}},{key:"getColumns",value:function(){var t=this,n=this.state,o=n.adminConfig;n.options;if(!o)return null;var r=o.listAttributes||Object.keys(o.attributes),i=r.map(function(t){var n=o.attributes[t]||{},r=Object(h.b)(n.component),i=n.format,a=n.renderAs;return{title:n.displayName,dataIndex:t,render:function(o,c){return Object(m.b)(o)?Object(h.c)(i,o):Object(m.a)(o)?o.map(function(e){return Object(h.c)(i,e)}).join(" "):r.options?r.options.find(function(e){return e.value==o}).key:"time"===a||/(createdAt|updatedAt)/.test(t)?o?f()(o).format("YYYY-MM-DD HH:mm:ss"):o:"image"===a?e.createElement("img",{src:o,style:{maxWidth:80}}):"link"===a||Object(h.a)(o)?e.createElement("a",{href:Object(h.c)(n.linkFormat,c)||o,rel:"noopener noreferrer",target:"_blank"},Object(h.c)(n.renderFormat,c)||o):o}}});return i.push({title:"操作",render:function(n,r){var i=r[o.primaryKey.field];return e.createElement("div",{className:b.a["icon-box"]},e.createElement(p.Icon,{onClick:t.onEdit.bind(t,i),type:"edit",title:"编辑"}),e.createElement(p.Icon,{onClick:t.onDelete.bind(t,i),type:"delete",title:"删除"}))}}),i}},{key:"getPagination",value:function(){var e=this,t=this.state;return{current:t.p,pageSize:t.n,total:t.total,onChange:function(t){e.setState({p:t},function(){e.getList()})},showQuickJumper:!0}}},{key:"render",value:function(){return e.createElement("div",null,e.createElement("div",{className:b.a.toolbar},e.createElement(p.Row,null,e.createElement(p.Col,{span:12,offset:12},e.createElement(p.Button.Group,null,e.createElement(p.Button,{onClick:this.onAdd.bind(this)},e.createElement(p.Icon,{type:"plus"}),"新增"))))),this.state.list.length?e.createElement(p.Table,{columns:this.getColumns(),dataSource:this.state.list,rowKey:function(e,t){return t},bordered:!0,pagination:this.getPagination()}):null)}}]),n}(a.Component),w=function(e){return e.list.toJS()},j=function(e){return{actions:Object(s.bindActionCreators)(d.a,e)}};t.a=Object(c.withRouter)(Object(u.connect)(w,j)(O))}).call(t,n(0))},function(e,t){e.exports={"icon-box":"_3VoI-l5mYSMwGe5kIPT833",toolbar:"_2lEVGzPVIPZxTfH-hZR5RQ"}},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=(n.n(a),n(3)),u=n(5),s=n(7),l=n(17),f=n(39),p=n(49),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),m=function(t){function n(e,t){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return i(n,t),h(n,[{key:"render",value:function(){var t=this.props.match.params;this.props.config,t.model;return e.createElement("div",null,t.pk?e.createElement(f.a,d({},this.props,{params:t})):e.createElement(p.a,d({},this.props,{params:t})))}}]),n}(a.Component),y=function(e){return e.edit.toJS()},b=function(e){return{actions:Object(s.bindActionCreators)(l.a,e)}};t.a=Object(c.withRouter)(Object(u.connect)(y,b)(m))}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=(n.n(a),n(8)),u=n.n(c),s=n(2),l=n(13),f=n.n(l),p=n(18),d=n(10),h=n(19),m=n.n(h),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),b=s.Modal.confirm,g=s.Form.Item,v=function(t){function n(e,t){o(this,n);var i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return i.state={loading:!1,instance:null,adminConfig:null},i.handleMessage=i.handleMessage.bind(i),i}return i(n,t),y(n,[{key:"componentDidMount",value:function(){this.getConfig(),this.getItem(),this.listenMessage()}},{key:"getItem",value:function(){var e=this,t=this.props,n=t.actions,o=t.params;n.getItem(o).then(function(t){t.error?s.message.error(t.payload+""):e.setState({instance:t.payload})})}},{key:"onDelete",value:function(e){var t=this,n=this.props,o=n.actions,r=n.params;b({title:"确定要删除记录吗",content:"",onOk:function(){t.setState({loading:!0}),o.deleteItem({model:r.model,pk:e}).then(function(e){e.error?(s.message.error(e.payload+""),t.setState({loading:!1})):(s.message.success("删除成功"),t.setState({loading:!1},function(){t.onSuccess("delete")}))})}})}},{key:"handleSubmit",value:function(e){var t=this,n=this.props,o=n.params,r=n.form,i=n.actions;r.validateFields(function(n,r){n||(t.setState({loading:!0}),t.formatValues(r),i.editItem(Object.assign({},o,r)).then(function(n){n.error?(s.message.error(n.payload+""),t.setState({loading:!1})):(s.message.success("编辑成功"),t.setState({loading:!1},function(){1===e&&t.onSuccess("edit")}))}))})}},{key:"getInitialValue",value:function(e,t){var n=this.state.instance,o=n[e];if(null!=o)return Object(d.b)(o)?n[t.foreignKey]+"":Object(d.a)(o)?o.map(function(e){return e[t.targetPK]+""}):"datetime"===t.component.type?f()(o):o+""}},{key:"render",value:function(){var t=this.state,n=t.adminConfig,o=t.instance,r=this.props.params,i=window.pageConfig.isPopup;return o&&n?e.createElement("div",null,i?null:this.getBreadcrumb(),e.createElement(s.Form,{onSubmit:this.handleSubmit.bind(this)},this.getRows(),e.createElement(g,{wrapperCol:{xs:{span:14,offset:6}}},e.createElement(s.Button,{loading:this.state.loading,type:"primary",onClick:this.handleSubmit.bind(this,1)},"提交"),i?null:e.createElement(s.Button,{style:{marginLeft:20},loading:this.state.loading,type:"primary",onClick:this.handleSubmit.bind(this,2)},"提交并继续编辑"),i?null:e.createElement(s.Button,{style:{marginLeft:20},loading:this.state.loading,type:"danger",onClick:this.onDelete.bind(this,r.pk)},"删除"),i||!o.previewUrl?null:e.createElement("a",{style:{marginLeft:20},href:o.previewUrl,rel:"noopener noreferrer",target:"_blank"},"预览地址")))):null}}]),n}(p.a);t.a=s.Form.create()(u()(v,m.a))}).call(t,n(0))},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}var c=n(0),u=n.n(c),s=n(41),l=(n.n(s),n(42)),f=(n.n(l),n(43)),p=n.n(f),d=n(44),h=n.n(d),m=(n(6),n(45)),y=(n.n(m),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),b=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(e.content){var a=h()(e.content);if(a){var c=l.ContentState.createFromBlockArray(a.contentBlocks),u=l.EditorState.createWithContent(c);i.state={editorState:u}}}else i.state={editorState:l.EditorState.createEmpty()};return i.onEditorStateChange=i.onEditorStateChange.bind(i),i}return i(t,e),y(t,[{key:"onEditorStateChange",value:function(e){this.setState({editorState:e});var t=p()(Object(l.convertToRaw)(e.getCurrentContent()));this.props.onChange&&this.props.onChange(t)}},{key:"enterFullscreen",value:function(){a(this.editor.getElementsByClassName("dx-editor-wrapper")[0])}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"dx-editor-box",ref:function(t){e.editor=t}},u.a.createElement(s.Editor,{wrapperClassName:"dx-editor-wrapper",editorClassName:"dx-editor",toolbarClassName:"dx-toolbar",editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange}),u.a.createElement("div",{className:"dx-editor-extra"},u.a.createElement("a",{onClick:this.enterFullscreen.bind(this)},"全屏")))}}]),t}(c.Component);t.a=b},function(e,t,n){e.exports=n(1)(1523)},function(e,t,n){e.exports=n(1)(57)},function(e,t,n){e.exports=n(1)(1617)},function(e,t,n){e.exports=n(1)(1618)},function(e,t){},function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n(0),u=n.n(c),s=n(2),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.state={targetKeys:e.targetKeys||[],selectedKeys:e.selectedKeys||[]},o}return a(t,e),f(t,[{key:"onChange",value:function(e,t,n){this.setState({targetKeys:e}),this.props.onChange&&this.props.onChange(e,t,n)}},{key:"handleSelectChange",value:function(e,t){this.setState({selectedKeys:[].concat(o(e),o(t))})}},{key:"render",value:function(){return u.a.createElement(s.Transfer,l({},this.props,{targetKeys:this.state.targetKeys,selectedKeys:this.state.selectedKeys,onSelectChange:this.handleSelectChange.bind(this),onChange:this.onChange.bind(this)}))}}]),t}(c.Component);t.a=p},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=n.n(a),u=n(8),s=n.n(u),l=n(2),f=n(48),p=n.n(f),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),m=l.Input.TextArea,y=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={count:e.value?e.value.length:0},i}return i(t,e),h(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{styleName:"textarea-box"},c.a.createElement(m,d({},this.props,{onChange:function(t){e.props.onChange(t),e.setState({count:t.target.value.length})}})),c.a.createElement("div",{styleName:"count"},"字数：",this.state.count))}}]),t}(a.Component);t.a=s()(y,p.a)},function(e,t){e.exports={"textarea-box":"_2po7ClBa7v3juyUBCwBuc4",count:"_30mXLtSddP8DHJn3qHvUii"}},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),c=(n.n(a),n(8)),u=n.n(c),s=n(2),l=n(18),f=n(19),p=n.n(f),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=s.Form.Item,m=function(t){function n(e,t){o(this,n);var i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return i.state={loading:!1,adminConfig:null},i.handleMessage=i.handleMessage.bind(i),i}return i(n,t),d(n,[{key:"componentDidMount",value:function(){this.getConfig(),this.listenMessage()}},{key:"getInitialValue",value:function(){}},{key:"handleSubmit",value:function(e){var t=this;e&&e.preventDefault();var n=this.props,o=n.params,r=n.form,i=n.actions;r.validateFields(function(e,n){e||(t.setState({loading:!0}),t.formatValues(n),i.addItem(Object.assign({},o,n)).then(function(e){e.error?(s.message.error(e.payload+""),t.setState({loading:!1})):(s.message.success("添加成功"),t.setState({loading:!1},function(){t.onSuccess("add")}))}))})}},{key:"render",value:function(){var t=this.state.adminConfig,n=window.pageConfig.isPopup;return t?e.createElement("div",null,n?null:this.getBreadcrumb(),e.createElement(s.Form,{onSubmit:this.handleSubmit.bind(this)},this.getRows(),e.createElement(h,{wrapperCol:{xs:{span:14,offset:6}}},e.createElement(s.Button,{loading:this.state.loading,type:"primary",htmlType:"submit"},"提交")))):null}}]),n}(l.a);t.a=s.Form.create()(u()(m,p.a))}).call(t,n(0))},function(e,t){},function(e,t){},function(e,t,n){"use strict";var o=n(7),r=n(53),i=n.n(r),a=n(54),c=n.n(a),u=n(55),s=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.compose,l=[i.a,c.a],f=Object(o.createStore)(u.a,s(o.applyMiddleware.apply(void 0,l)));t.a=f},function(e,t,n){e.exports=n(1)(1616)},function(e,t,n){e.exports=n(1)(1611)},function(e,t,n){"use strict";var o=n(7),r=n(56),i=n(57),a=n(58);t.a=Object(o.combineReducers)({home:r.a,list:i.a,edit:a.a})},function(e,t,n){"use strict";var o=n(4),r=(n(12),n(11)),i=(n.n(r),Object(o.handleActions)({},Object(r.fromJS)({})));t.a=i},function(e,t,n){"use strict";var o=n(4),r=(n(14),n(11)),i=(n.n(r),Object(o.handleActions)({},Object(r.fromJS)({})));t.a=i},function(e,t,n){"use strict";var o=n(4),r=(n(17),n(11)),i=(n.n(r),Object(o.handleActions)({},Object(r.fromJS)({})));t.a=i}]);